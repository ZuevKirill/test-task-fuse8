{"version":3,"sources":["script.js"],"names":["server","valueSearch","document","querySelector","preview","element","tag","classes","contant","node","createElement","length","classList","add","textContent","nodata","numPricePound","num","toString","replace","sendRequest","method","url","body","Promise","resolve","reject","xhr","XMLHttpRequest","open","responseType","setRequestHeader","onload","status","response","data","onerror","send","render","forEach","item","insertAdjacentHTML","id","type","title","address","price","then","catch","err","console","log","oninput","val","value","trim","searchItem","Array","prototype","slice","call","children","showNoData","elems","totalHide","remove","elem","innerHTML","toLowerCase","search","after"],"mappings":";AAAA,MAAMA,EAAS,oDACTC,EAAcC,SAASC,cAAc,WACrCC,EAAUF,SAASC,cAAc,YAEjCE,EAAU,CAACC,EAAKC,EAAU,GAAIC,KAC1BC,MAAAA,EAAOP,SAASQ,cAAcJ,GAG7BG,OAFJF,EAAQI,QAAQF,EAAKG,UAAUC,OAAON,GACtCC,IAASC,EAAKK,YAAcN,GACxBC,GAGLM,EAASV,EAAQ,IAAK,CAAC,mBAAoB,cAEjD,SAASW,EAAeC,GACb,MAAA,IAAMA,EAAIC,WAAWC,QAAQ,0BAA2B,OAGnE,SAASC,EAAYC,EAAQC,EAAKC,EAAO,MAC9B,OAAA,IAAIC,QAAQ,CAACC,EAASC,KACnBC,MAAAA,EAAM,IAAIC,eAChBD,EAAIE,KAAKR,EAAQC,GACjBK,EAAIG,aAAe,OACnBH,EAAII,iBAAiB,eAAgB,qCAErCJ,EAAIK,OAAS,MACU,MAAfL,EAAIM,OACJP,EAAOC,EAAIO,SAASC,MAEpBV,EAAQE,EAAIO,YAGpBP,EAAIS,QAAU,MACVV,EAAOC,EAAIO,YAEfP,EAAIU,KAAKd,KAUjB,SAASe,EAAOH,GACZA,EAAKI,QAAQC,IACJA,GACLpC,EAAQqC,mBAAmB,0GAEED,EAAKE,uOAG0B,sBAAdF,EAAKG,KAA+B,OAAS,aAAaH,EAAKG,iJAGhEH,EAAKI,gDACvBJ,EAAKK,6GACiD7B,EAAcwB,EAAKM,gMAnB5G1B,EAAY,MAAOpB,GACd+C,KAAKZ,IACFG,EAAOH,KAEVa,MAAMC,GAAOC,QAAQC,IAAIF,IAwB9BhD,EAAYmD,QAAU,iBACdC,IAAAA,EAAM,KAAKC,MAAMC,OAErBC,EADYC,MAAMC,UAAUC,MAAMC,KAAKxD,EAAQyD,UAC7BR,IAGtB,IAAIS,GAAa,EAEjB,SAASN,EAAWO,EAAOV,GACnBW,IAAAA,EAAY,EACbX,EAAI1C,QAAU,GAAKmD,GAAY/C,EAAOkD,SACzCF,EAAMxB,QAAQ,SAAS2B,GAAM,IAAA,GAC0D,IAAtDC,QAA1BD,EAAAA,EAAK/D,cAAc,aAAOgE,IAAAA,OAAAA,EAAAA,EAAAA,UAAUC,cAAcC,OAAOhB,EAAIe,iBAAwBf,EAAI1C,QAAU,GAClGuD,EAAKtD,UAAUC,IAAI,QACnBmD,MAEAE,EAAKtD,UAAUqD,OAAO,QACtBD,OAGLD,EAAMpD,SAAqB,EAAVqD,GAAeX,EAAI1C,QAAU,IAC7CP,EAAQkE,MAAMvD,GACd+C,GAAa","file":"script.75e74bf2.js","sourceRoot":"../src","sourcesContent":["const server = 'https://603e38c548171b0017b2ecf7.mockapi.io/homes'\nconst valueSearch = document.querySelector('#filter')\nconst preview = document.querySelector('.preview')\n\nconst element = (tag, classes = [], contant) => {\n    const node = document.createElement(tag)\n    if(classes.length) node.classList.add(...classes)\n    if(contant) node.textContent = contant\n    return node\n}\n\nconst nodata = element('p', ['preview__nodata'], 'Нет данных')\n\nfunction numPricePound (num){\n    return '£' + num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")\n}\n\nfunction sendRequest(method, url, body = null) {\n    return new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest()\n        xhr.open(method, url)\n        xhr.responseType = 'json'\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\n\n        xhr.onload = () => {\n            if (xhr.status === 400) {\n                reject(xhr.response.data)\n            } else {\n                resolve(xhr.response)\n            }\n        }\n        xhr.onerror = () => {\n            reject(xhr.response)\n        }\n        xhr.send(body)\n    })\n}\n\nsendRequest('GET', server)\n    .then(data => {\n        render(data)\n    })\n    .catch(err => console.log(err))\n\nfunction render(data){\n    data.forEach(item => {\n        if (!item) return\n        preview.insertAdjacentHTML('beforeend', `\n            <div tabindex=\"0\" class=\"preview__item\">\n                <a  href=\"/details/${item.id}\" style=\"display: block;\">\n                    <div class=\"preview__img ratio ratio16x9\">\n                        <img src=\"https://via.placeholder.com/300x150/\" alt=\"\"/>\n                        <span class=\"preview__lable ${item.type === 'IndependentLiving' ? 'blue' : 'orange'}\">${item.type}</span>\n                    </div>\n                    <span class=\"preview__info\">\n                        <h2 class=\"preview__title\">${item.title}</h2>\n                        <address>${item.address}</address>\n                        <p class=\"preview__price\">New Properties for Sale from <strong>${numPricePound(item.price)}</strong></p>\n                        <p class=\"preview__text-smal\">Shared Ownership Available</p>\n                    </span>\n                </a>\n            </div>\n        `)\n    })\n}\n\nvalueSearch.oninput = async function () {\n    let val = this.value.trim()\n    let elems = Array.prototype.slice.call(preview.children)\n    searchItem(elems, val)\n}\n\nlet showNoData = false\n\nfunction searchItem(elems, val){\n    let totalHide = 0\n    if(val.length <= 3 && showNoData) nodata.remove()\n    elems.forEach(function(elem) {\n        if(elem.querySelector('h2')?.innerHTML.toLowerCase().search(val.toLowerCase()) == -1 && val.length >= 4) {\n            elem.classList.add('hide')\n            totalHide++\n        }else{\n            elem.classList.remove('hide')\n            totalHide--\n        }\n    })\n    if(elems.length === totalHide*1 && val.length >= 2){\n        preview.after(nodata)\n        showNoData = true\n    }\n}\n"]}