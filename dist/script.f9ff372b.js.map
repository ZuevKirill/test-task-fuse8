{"version":3,"sources":["script.js"],"names":["serveJSON","valueSearch","document","querySelector","preview","numPricePound","num","toString","replace","sendRequest","method","url","body","Promise","resolve","reject","xhr","XMLHttpRequest","open","responseType","setRequestHeader","onload","status","response","data","onerror","send","render","forEach","item","insertAdjacentHTML","id","type","title","address","price","searchItem","elems","val","elem","innerHTML","toLowerCase","search","classList","add","remove","then","catch","err","console","log","oninput","value","trim","Array","prototype","slice","call","children","length"],"mappings":";AAAA,MAAMA,EAAY,oDACZC,EAAcC,SAASC,cAAc,WACrCC,EAAUF,SAASC,cAAc,YAEvC,SAASE,EAAeC,GACb,MAAA,IAAMA,EAAIC,WAAWC,QAAQ,0BAA2B,OAGnE,SAASC,EAAYC,EAAQC,EAAKC,EAAO,MAC9B,OAAA,IAAIC,QAAQ,CAACC,EAASC,KACnBC,MAAAA,EAAM,IAAIC,eAChBD,EAAIE,KAAKR,EAAQC,GACjBK,EAAIG,aAAe,OACnBH,EAAII,iBAAiB,eAAgB,qCAErCJ,EAAIK,OAAS,MACU,MAAfL,EAAIM,OACJP,EAAOC,EAAIO,SAASC,MAEpBV,EAAQE,EAAIO,YAGpBP,EAAIS,QAAU,MACVV,EAAOC,EAAIO,YAEfP,EAAIU,KAAKd,KAUjB,SAASe,EAAOH,GACZA,EAAKI,QAAQC,IACJA,GACLzB,EAAQ0B,mBAAmB,iFAC+BD,EAAKE,2NAGP,sBAAdF,EAAKG,KAA+B,OAAS,aAAaH,EAAKG,qIAGhEH,EAAKI,4CACvBJ,EAAKK,yGACiD7B,EAAcwB,EAAKM,+JAoBxG,SAASC,EAAWC,EAAOC,GACvBD,EAAMT,QAAQ,SAASW,IAC+D,GAA/EA,EAAKpC,cAAc,MAAMqC,UAAUC,cAAcC,OAAOJ,EAAIG,eAC3DF,EAAKI,UAAUC,IAAI,QAEnBL,EAAKI,UAAUE,OAAO,UA3ClCpC,EAAY,MAAOT,GACd8C,KAAKtB,IACFG,EAAOH,KAEVuB,MAAMC,GAAOC,QAAQC,IAAIF,IAsB9B/C,EAAYkD,QAAU,iBACdb,IAAAA,EAAM,KAAKc,MAAMC,OACjBhB,EAAQiB,MAAMC,UAAUC,MAAMC,KAAKrD,EAAQsD,UACpC,IAAPpB,GAAaA,EAAIqB,QAAU,EAC3BvB,EAAWC,EAAOC,GAElBD,EAAMT,QAAQ,SAASW,GACnBA,EAAKI,UAAUE,OAAO","file":"script.f9ff372b.js","sourceRoot":"../src","sourcesContent":["const serveJSON = 'https://603e38c548171b0017b2ecf7.mockapi.io/homes'\nconst valueSearch = document.querySelector('#filter')\nconst preview = document.querySelector('.preview')\n\nfunction numPricePound (num){\n    return 'Â£' + num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")\n}\n\nfunction sendRequest(method, url, body = null) {\n    return new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest()\n        xhr.open(method, url)\n        xhr.responseType = 'json'\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\n\n        xhr.onload = () => {\n            if (xhr.status === 400) {\n                reject(xhr.response.data)\n            } else {\n                resolve(xhr.response)\n            }\n        }\n        xhr.onerror = () => {\n            reject(xhr.response)\n        }\n        xhr.send(body)\n    })\n}\n\nsendRequest('GET', serveJSON)\n    .then(data => {\n        render(data)\n    })\n    .catch(err => console.log(err))\n\nfunction render(data){\n    data.forEach(item => {\n        if (!item) return\n        preview.insertAdjacentHTML('beforeend', `\n           <a class=\"preview__item\" tabindex=\"0\" href=\"/details/${item.id}\" style=\"display: block;\">\n                <div class=\"preview__img ratio ratio16x9\">\n                    <img src=\"https://via.placeholder.com/300x150/\" alt=\"\"/>\n                    <span class=\"preview__lable ${item.type === 'IndependentLiving' ? 'blue' : 'orange'}\">${item.type}</span>\n                </div>\n                <span class=\"preview__info\">\n                    <h2 class=\"preview__title\">${item.title}</h2>\n                    <address>${item.address}</address>\n                    <p class=\"preview__price\">New Properties for Sale from <strong>${numPricePound(item.price)}</strong></p>\n                    <p class=\"preview__text-smal\">Shared Ownership Available</p>\n                </span>\n           </a>\n        `)\n    })\n}\n\nvalueSearch.oninput = async function () {\n    let val = this.value.trim()\n    let elems = Array.prototype.slice.call(preview.children)\n    if (val != '' && val.length >= 3){\n        searchItem(elems, val)\n    }else{\n        elems.forEach(function(elem) {\n            elem.classList.remove('hide')\n        })\n    }\n}\n\nfunction searchItem(elems, val){\n    elems.forEach(function(elem) {\n        if(elem.querySelector('h2').innerHTML.toLowerCase().search(val.toLowerCase()) == -1) {\n            elem.classList.add('hide')\n        }else{\n            elem.classList.remove('hide')\n        }\n    });\n}"]}